/* 
 * This file is auto-generated.
 * Do not edit this file manually.
 * Your changes will be overwritten during the next generation.
 */
package org.openapis.openapi;

import static org.openapis.openapi.operations.Operations.AsyncRequestOperation;

import jakarta.annotation.Nullable;
import java.lang.Long;
import java.lang.String;
import java.util.concurrent.CompletableFuture;
import org.openapis.openapi.models.operations.ListErrorsRequest;
import org.openapis.openapi.models.operations.ListErrorsTimespan;
import org.openapis.openapi.models.operations.async.ListErrorsRequestBuilder;
import org.openapis.openapi.models.operations.async.ListErrorsResponse;
import org.openapis.openapi.operations.ListErrors;
import org.openapis.openapi.utils.Headers;
import org.openapis.openapi.utils.Options;

/**
 * Operations involving errors
 */
public class AsyncErrors {
    private static final Headers _headers = Headers.EMPTY;
    private final SDKConfiguration sdkConfiguration;
    private final Errors syncSDK;

    AsyncErrors(Errors syncSDK, SDKConfiguration sdkConfiguration) {
        this.sdkConfiguration = sdkConfiguration;
        this.syncSDK = syncSDK;
    }

    /**
     * Switches to the sync SDK.
     * 
     * @return The sync SDK
     */
    public Errors sync() {
        return syncSDK;
    }


    /**
     * List errors
     * 
     * <p>This endpoint returns the total number of playback errors that occurred, along with the total number
     * of views captured, based on the specified timespan and filters. It provides insights into the
     * overall playback quality and helps identify potential issues that may impact viewer experience.
     * 
     * <p>#### Key fields in response
     * 
     * <p>* **percentage:** The percentage of views affected by the specific error.
     * * **uniqueViewersEffectedPercentage:** The percentage of unique viewers affected by the specific
     * error (available only in the topErrors section).
     * * **notes:** Additional notes or information about the specific error.
     * * **message:** The error message or description.
     * * **lastSeen:** The timestamp of when the error was last observed.
     * * **id:** The unique identifier for the specific error.
     * * **description:** A description of the specific error.
     * * **count:** The number of occurrences of the specific error.
     * * **code:** The error code associated with the specific error.
     * 
     * <p>Related guide: <a href="https://docs.fastpix.io/docs/track-playback-errors">Troubleshoot errors</a>
     * 
     * @return The async call builder
     */
    public ListErrorsRequestBuilder list() {
        return new ListErrorsRequestBuilder(sdkConfiguration);
    }

    /**
     * List errors
     * 
     * <p>This endpoint returns the total number of playback errors that occurred, along with the total number
     * of views captured, based on the specified timespan and filters. It provides insights into the
     * overall playback quality and helps identify potential issues that may impact viewer experience.
     * 
     * <p>#### Key fields in response
     * 
     * <p>* **percentage:** The percentage of views affected by the specific error.
     * * **uniqueViewersEffectedPercentage:** The percentage of unique viewers affected by the specific
     * error (available only in the topErrors section).
     * * **notes:** Additional notes or information about the specific error.
     * * **message:** The error message or description.
     * * **lastSeen:** The timestamp of when the error was last observed.
     * * **id:** The unique identifier for the specific error.
     * * **description:** A description of the specific error.
     * * **count:** The number of occurrences of the specific error.
     * * **code:** The error code associated with the specific error.
     * 
     * <p>Related guide: <a href="https://docs.fastpix.io/docs/track-playback-errors">Troubleshoot errors</a>
     * 
     * @return {@code CompletableFuture<ListErrorsResponse>} - The async response
     */
    public CompletableFuture<ListErrorsResponse> listDirect() {
        return list(
                null, null, null,
                null);
    }

    /**
     * List errors
     * 
     * <p>This endpoint returns the total number of playback errors that occurred, along with the total number
     * of views captured, based on the specified timespan and filters. It provides insights into the
     * overall playback quality and helps identify potential issues that may impact viewer experience.
     * 
     * <p>#### Key fields in response
     * 
     * <p>* **percentage:** The percentage of views affected by the specific error.
     * * **uniqueViewersEffectedPercentage:** The percentage of unique viewers affected by the specific
     * error (available only in the topErrors section).
     * * **notes:** Additional notes or information about the specific error.
     * * **message:** The error message or description.
     * * **lastSeen:** The timestamp of when the error was last observed.
     * * **id:** The unique identifier for the specific error.
     * * **description:** A description of the specific error.
     * * **count:** The number of occurrences of the specific error.
     * * **code:** The error code associated with the specific error.
     * 
     * <p>Related guide: <a href="https://docs.fastpix.io/docs/track-playback-errors">Troubleshoot errors</a>
     * 
     * @param timespan This parameter specifies the time span between which the video views list must be retrieved by. You can provide either from and to unix epoch timestamps or time duration. The scope of duration is between 60 minutes to 30 days.
     *         
     *         **Accepted formats are:**
     *         
     *         array of epoch timestamps for example  
     *         `timespan[]=1498867200&amp;timespan[]=1498953600`
     *         
     *         duration string for example  
     *         `timespan[]=24:hours` or `timespan[]=7:days`
     *         
     * @param filterby Pass the dimensions and their corresponding values you want to filter the views by. For excluding the values in the filter we can pass "!" before the filter value. The list of filters can be obtained from list of dimensions endpoint.
     *         Example Values : [ browser_name:Chrome , os_name:macOS , !device_name:Galaxy ]
     *         
     * @param limit Pass the limit to display only the rows specified by the value for top errors.
     *         
     * @param options additional options
     * @return {@code CompletableFuture<ListErrorsResponse>} - The async response
     */
    public CompletableFuture<ListErrorsResponse> list(
            @Nullable ListErrorsTimespan timespan, @Nullable String filterby,
            @Nullable Long limit, @Nullable Options options) {
        ListErrorsRequest request = new ListErrorsRequest(timespan, filterby, limit);
        AsyncRequestOperation<ListErrorsRequest, ListErrorsResponse> operation
              = new ListErrors.Async(
                                    sdkConfiguration, options, sdkConfiguration.retryScheduler(),
                                    _headers);
        return operation.doRequest(request)
            .thenCompose(operation::handleResponse);
    }

}
